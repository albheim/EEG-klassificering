data dir
/lunarc/nobackup/users/albheim/EEG-klassificering/DATA
script
#!/bin/sh
#SBATCH -t 10:00:00
#SBATCH -J lstm_eeg
#SBATCH -A lu2018-2-3
#// SBATCH -o stdout_%j.out
#// SBATCH -e stderr_%j.err

# shold be lu or gpu
#SBATCH -p gpu

# how many gpus, 4 per node
#SBATCH --gres=gpu:1

#SBATCH --mem-per-cpu=3100

DATA_DIR="$(cat ../data_location.txt)"
echo "data dir"
echo $DATA_DIR

echo "script"
cat $0

PY_FILE="test.py"
echo "py file"
cat $PY_FILE

echo "nvidia smi"
nvidia-smi

echo "start time"
date

cp -r $DATA_DIR $SNIC_TMP
ls $SNIC_TMP
du -h "${SNIC_TMP}/DATA"

echo "copy done time"
date

python $PY_FILE $SNIC_TMP

echo "end time"
date
py file
import sys
from datetime import datetime

import numpy as np
from scipy import io

import tensorflow as tf

from keras.models import Sequential
from keras.layers import Dense, Dropout, Input
from keras.layers import TimeDistributed
from keras.layers import SimpleRNN, RNN, LSTM, GRU

from keras.optimizers import SGD, Adam, RMSprop, Nadam
from keras import backend as K

from tensorflow.python.client import device_lib
print("here comes devices list")
print(device_lib.list_local_devices())
print("finished with device list")
print(str(datetime.now()))

import models
import data
import util


x, y = data.load_single()

splits = 5
n_subs = len(x)

mod = []
for i in range(20):
    mod.append(models.lstm_lstm(x[0][0].shape,
                                np.random.randint(10, 90),
                                np.random.randint(5, 50),
                                np.random.ranf() * 0.5 + 0.25))



for model in mod:
    model.summary()
    w_save = model.get_weights()
    avgacc = 0
    for i in range(n_subs):
        n = x[i].shape[0]
        acc = 0
        for tr, val in util.kfold(n, splits):
            # reset to initial weights
            model.set_weights(w_save)

            # fit with next kfold data
            model.fit(x[i][tr], y[i][tr],
                      batch_size=64, epochs=50, verbose=0)

            loss, accuracy = model.evaluate(x[i][val], y[i][val], verbose=0)
            acc += accuracy

        acc /= splits
        avgacc += acc

        print("subject {}, avg accuracy {} over {} splits".format(i + 1 if i + 1 < 10 else i + 2, acc, splits))

    avgacc /= n_subs
    print("avg accuracy over all subjects {}".format(avgacc))


nvidia smi
Sat Feb 17 18:39:29 2018       
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 384.81                 Driver Version: 384.81                    |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|===============================+======================+======================|
|   0  Tesla K80           On   | 00000000:04:00.0 Off |                    0 |
| N/A   55C    P8    28W / 149W |      1MiB / 11439MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   1  Tesla K80           On   | 00000000:05:00.0 Off |                    0 |
| N/A   57C    P8    33W / 149W |      1MiB / 11439MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   2  Tesla K80           On   | 00000000:84:00.0 Off |                    0 |
| N/A   24C    P8    25W / 149W |      1MiB / 11439MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   3  Tesla K80           On   | 00000000:85:00.0 Off |                    0 |
| N/A   31C    P8    30W / 149W |      1MiB / 11439MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
                                                                               
+-----------------------------------------------------------------------------+
| Processes:                                                       GPU Memory |
|  GPU       PID   Type   Process name                             Usage      |
|=============================================================================|
|  No running processes found                                                 |
+-----------------------------------------------------------------------------+
start time
Sat Feb 17 18:39:29 CET 2018
DATA
2.4G	/local/slurmtmp.468632/DATA/Visual
2.4G	/local/slurmtmp.468632/DATA/Verbal
4.7G	/local/slurmtmp.468632/DATA
copy done time
Sat Feb 17 18:40:40 CET 2018
2018-02-17 18:40:41.934302: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA
2018-02-17 18:40:42.197795: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found device 0 with properties: 
name: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235
pciBusID: 0000:04:00.0
totalMemory: 11.17GiB freeMemory: 11.10GiB
2018-02-17 18:40:42.197917: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: Tesla K80, pci bus id: 0000:04:00.0, compute capability: 3.7)
2018-02-17 18:41:19.974681: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: Tesla K80, pci bus id: 0000:04:00.0, compute capability: 3.7)
/home/albheim/.conda/envs/keras-gpu/lib/python3.6/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.
  from ._conv import register_converters as _register_converters
Using TensorFlow backend.
here comes devices list
[name: "/device:CPU:0"
device_type: "CPU"
memory_limit: 268435456
locality {
}
incarnation: 9820977632072898237
, name: "/device:GPU:0"
device_type: "GPU"
memory_limit: 11324823962
locality {
  bus_id: 1
}
incarnation: 18420164007566114577
physical_device_desc: "device: 0, name: Tesla K80, pci bus id: 0000:04:00.0, compute capability: 3.7"
]
finished with device list
2018-02-17 18:40:43.416497
loading  Subj01_CleanData_study_FA
loading  Subj01_CleanData_study_LM
loading  Subj01_CleanData_study_OB
loading  Subj02_CleanData_study_FA
loading  Subj02_CleanData_study_LM
loading  Subj02_CleanData_study_OB
loading  Subj03_CleanData_study_FA
loading  Subj03_CleanData_study_LM
loading  Subj03_CleanData_study_OB
loading  Subj04_CleanData_study_FA
loading  Subj04_CleanData_study_LM
loading  Subj04_CleanData_study_OB
loading  Subj05_CleanData_study_FA
loading  Subj05_CleanData_study_LM
loading  Subj05_CleanData_study_OB
loading  Subj06_CleanData_study_FA
loading  Subj06_CleanData_study_LM
loading  Subj06_CleanData_study_OB
loading  Subj07_CleanData_study_FA
loading  Subj07_CleanData_study_LM
loading  Subj07_CleanData_study_OB
loading  Subj08_CleanData_study_FA
loading  Subj08_CleanData_study_LM
loading  Subj08_CleanData_study_OB
loading  Subj09_CleanData_study_FA
loading  Subj09_CleanData_study_LM
loading  Subj09_CleanData_study_OB
loading  Subj11_CleanData_study_FA
loading  Subj11_CleanData_study_LM
loading  Subj11_CleanData_study_OB
loading  Subj12_CleanData_study_FA
loading  Subj12_CleanData_study_LM
loading  Subj12_CleanData_study_OB
loading  Subj13_CleanData_study_FA
loading  Subj13_CleanData_study_LM
loading  Subj13_CleanData_study_OB
loading  Subj14_CleanData_study_FA
loading  Subj14_CleanData_study_LM
loading  Subj14_CleanData_study_OB
loading  Subj15_CleanData_study_FA
loading  Subj15_CleanData_study_LM
loading  Subj15_CleanData_study_OB
loading  Subj16_CleanData_study_FA
loading  Subj16_CleanData_study_LM
loading  Subj16_CleanData_study_OB
loading  Subj17_CleanData_study_FA
loading  Subj17_CleanData_study_LM
loading  Subj17_CleanData_study_OB
loading  Subj18_CleanData_study_FA
loading  Subj18_CleanData_study_LM
loading  Subj18_CleanData_study_OB
loading  Subj19_CleanData_study_FA
loading  Subj19_CleanData_study_LM
loading  Subj19_CleanData_study_OB
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
lstm_1 (LSTM)                (None, 31, 47)            153408    
_________________________________________________________________
dropout_1 (Dropout)          (None, 31, 47)            0         
_________________________________________________________________
lstm_2 (LSTM)                (None, 25)                7300      
_________________________________________________________________
dense_1 (Dense)              (None, 3)                 78        
=================================================================
Total params: 160,786
Trainable params: 160,786
Non-trainable params: 0
_________________________________________________________________
subject 1, avg accuracy 0.46486486542869265 over 5 splits
subject 2, avg accuracy 0.39061166548288057 over 5 splits
subject 3, avg accuracy 0.5435277406725063 over 5 splits
subject 4, avg accuracy 0.41621621726332486 over 5 splits
subject 5, avg accuracy 0.49231863554307437 over 5 splits
subject 6, avg accuracy 0.42957958086832865 over 5 splits
subject 7, avg accuracy 0.5266002856014802 over 5 splits
subject 8, avg accuracy 0.4684210546706852 over 5 splits
subject 9, avg accuracy 0.41891891941915704 over 5 splits
subject 11, avg accuracy 0.4396396398812801 over 5 splits
subject 12, avg accuracy 0.42631579041481016 over 5 splits
subject 13, avg accuracy 0.32418207721215053 over 5 splits
subject 14, avg accuracy 0.4344129575006714 over 5 splits
subject 15, avg accuracy 0.5252252258695997 over 5 splits
subject 16, avg accuracy 0.4163292863751874 over 5 splits
subject 17, avg accuracy 0.6578947377832313 over 5 splits
subject 18, avg accuracy 0.5189189200465745 over 5 splits
subject 19, avg accuracy 0.3478978979784447 over 5 splits
avg accuracy over all subjects 0.4578819721117822
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
lstm_3 (LSTM)                (None, 31, 50)            163800    
_________________________________________________________________
dropout_2 (Dropout)          (None, 31, 50)            0         
_________________________________________________________________
lstm_4 (LSTM)                (None, 8)                 1888      
_________________________________________________________________
dense_2 (Dense)              (None, 3)                 27        
=================================================================
Total params: 165,715
Trainable params: 165,715
Non-trainable params: 0
_________________________________________________________________
subject 1, avg accuracy 0.5027027048774668 over 5 splits
subject 2, avg accuracy 0.4551920366914649 over 5 splits
subject 3, avg accuracy 0.554054055826084 over 5 splits
subject 4, avg accuracy 0.44324324541800736 over 5 splits
subject 5, avg accuracy 0.5506401158667901 over 5 splits
subject 6, avg accuracy 0.571321323254445 over 5 splits
subject 7, avg accuracy 0.5587482228726784 over 5 splits
subject 8, avg accuracy 0.4578947379400855 over 5 splits
subject 9, avg accuracy 0.4513513534286114 over 5 splits
subject 11, avg accuracy 0.43408408440627133 over 5 splits
subject 12, avg accuracy 0.48947368577906963 over 5 splits
subject 13, avg accuracy 0.3826458045674931 over 5 splits
subject 14, avg accuracy 0.3821862355980635 over 5 splits
subject 15, avg accuracy 0.5202702709146447 over 5 splits
subject 16, avg accuracy 0.40526315943512686 over 5 splits
subject 17, avg accuracy 0.600000000470563 over 5 splits
subject 18, avg accuracy 0.46486486655634807 over 5 splits
subject 19, avg accuracy 0.3807807808613276 over 5 splits
avg accuracy over all subjects 0.47803981582025235
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
lstm_5 (LSTM)                (None, 31, 74)            249528    
_________________________________________________________________
dropout_3 (Dropout)          (None, 31, 74)            0         
_________________________________________________________________
lstm_6 (LSTM)                (None, 37)                16576     
_________________________________________________________________
dense_3 (Dense)              (None, 3)                 114       
=================================================================
Total params: 266,218
Trainable params: 266,218
Non-trainable params: 0
_________________________________________________________________
subject 1, avg accuracy 0.5405405411849151 over 5 splits
subject 2, avg accuracy 0.44523470951177996 over 5 splits
subject 3, avg accuracy 0.5809388356646298 over 5 splits
subject 4, avg accuracy 0.34054054166819603 over 5 splits
subject 5, avg accuracy 0.49132290343471813 over 5 splits
subject 6, avg accuracy 0.4783783793449402 over 5 splits
subject 7, avg accuracy 0.5213371277025041 over 5 splits
subject 8, avg accuracy 0.4368421058905752 over 5 splits
subject 9, avg accuracy 0.4896159334932248 over 5 splits
subject 11, avg accuracy 0.4397897905952579 over 5 splits
subject 12, avg accuracy 0.39473684273268045 over 5 splits
subject 13, avg accuracy 0.38307254717580624 over 5 splits
subject 14, avg accuracy 0.39797570990164755 over 5 splits
subject 15, avg accuracy 0.4866366372810112 over 5 splits
subject 16, avg accuracy 0.4840755750896477 over 5 splits
subject 17, avg accuracy 0.6526315805159117 over 5 splits
subject 18, avg accuracy 0.5621621640952859 over 5 splits
subject 19, avg accuracy 0.3651651653262588 over 5 splits
avg accuracy over all subjects 0.47172206058938826
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
lstm_7 (LSTM)                (None, 31, 34)            109208    
_________________________________________________________________
dropout_4 (Dropout)          (None, 31, 34)            0         
_________________________________________________________________
lstm_8 (LSTM)                (None, 35)                9800      
_________________________________________________________________
dense_4 (Dense)              (None, 3)                 108       
=================================================================
Total params: 119,116
Trainable params: 119,116
Non-trainable params: 0
_________________________________________________________________
subject 1, avg accuracy 0.5351351363433374 over 5 splits
subject 2, avg accuracy 0.4176386925226255 over 5 splits
subject 3, avg accuracy 0.5001422487188709 over 5 splits
subject 4, avg accuracy 0.34594594691250774 over 5 splits
subject 5, avg accuracy 0.604125178067986 over 5 splits
subject 6, avg accuracy 0.48918919112231285 over 5 splits
subject 7, avg accuracy 0.4998577532947996 over 5 splits
subject 8, avg accuracy 0.46842105435697656 over 5 splits
subject 9, avg accuracy 0.4082503568185003 over 5 splits
subject 11, avg accuracy 0.48843843868007897 over 5 splits
subject 12, avg accuracy 0.3473684218369032 over 5 splits
subject 13, avg accuracy 0.3617354203465992 over 5 splits
subject 14, avg accuracy 0.449932525161146 over 5 splits
subject 15, avg accuracy 0.47492492508601847 over 5 splits
subject 16, avg accuracy 0.4263157917903021 over 5 splits
subject 17, avg accuracy 0.6210526323632191 over 5 splits
subject 18, avg accuracy 0.5567567581260526 over 5 splits
subject 19, avg accuracy 0.4920420421225888 over 5 splits
avg accuracy over all subjects 0.4715151396483792
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
lstm_9 (LSTM)                (None, 31, 43)            139664    
_________________________________________________________________
dropout_5 (Dropout)          (None, 31, 43)            0         
_________________________________________________________________
lstm_10 (LSTM)               (None, 26)                7280      
_________________________________________________________________
dense_5 (Dense)              (None, 3)                 81        
=================================================================
Total params: 147,025
Trainable params: 147,025
Non-trainable params: 0
_________________________________________________________________
subject 1, avg accuracy 0.4810810821281897 over 5 splits
subject 2, avg accuracy 0.46031294549003265 over 5 splits
subject 3, avg accuracy 0.532716929217321 over 5 splits
subject 4, avg accuracy 0.44324324404871146 over 5 splits
subject 5, avg accuracy 0.48733997300034054 over 5 splits
subject 6, avg accuracy 0.5222222244775331 over 5 splits
subject 7, avg accuracy 0.574822193155248 over 5 splits
subject 8, avg accuracy 0.45263158020220307 over 5 splits
subject 9, avg accuracy 0.4788051217073736 over 5 splits
subject 11, avg accuracy 0.5052552555774426 over 5 splits
subject 12, avg accuracy 0.36315789505055074 over 5 splits
subject 13, avg accuracy 0.3618776680904296 over 5 splits
subject 14, avg accuracy 0.45506072936833475 over 5 splits
subject 15, avg accuracy 0.49699699731918423 over 5 splits
subject 16, avg accuracy 0.46356275504739014 over 5 splits
subject 17, avg accuracy 0.6736842114674417 over 5 splits
subject 18, avg accuracy 0.5405405415876492 over 5 splits
subject 19, avg accuracy 0.4692192195414065 over 5 splits
avg accuracy over all subjects 0.48680725369315453
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
lstm_11 (LSTM)               (None, 31, 70)            234920    
_________________________________________________________________
dropout_6 (Dropout)          (None, 31, 70)            0         
_________________________________________________________________
lstm_12 (LSTM)               (None, 10)                3240      
_________________________________________________________________
dense_6 (Dense)              (None, 3)                 33        
=================================================================
Total params: 238,193
Trainable params: 238,193
Non-trainable params: 0
_________________________________________________________________
subject 1, avg accuracy 0.47027027075355116 over 5 splits
subject 2, avg accuracy 0.4766714090515845 over 5 splits
subject 3, avg accuracy 0.5588904721384198 over 5 splits
subject 4, avg accuracy 0.4108108125022939 over 5 splits
subject 5, avg accuracy 0.5507823633859371 over 5 splits
subject 6, avg accuracy 0.5379879897600179 over 5 splits
subject 7, avg accuracy 0.5425320061011132 over 5 splits
subject 8, avg accuracy 0.4947368428895348 over 5 splits
subject 9, avg accuracy 0.451066856991346 over 5 splits
subject 11, avg accuracy 0.45660660676770026 over 5 splits
subject 12, avg accuracy 0.4052631588358627 over 5 splits
subject 13, avg accuracy 0.43086771188809897 over 5 splits
subject 14, avg accuracy 0.41889338902777185 over 5 splits
subject 15, avg accuracy 0.5581081084302953 over 5 splits
subject 16, avg accuracy 0.4483130916571006 over 5 splits
subject 17, avg accuracy 0.5842105278843327 over 5 splits
subject 18, avg accuracy 0.5243243267407289 over 5 splits
subject 19, avg accuracy 0.37612612612612617 over 5 splits
avg accuracy over all subjects 0.4831367817184341
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
lstm_13 (LSTM)               (None, 31, 59)            195408    
_________________________________________________________________
dropout_7 (Dropout)          (None, 31, 59)            0         
_________________________________________________________________
lstm_14 (LSTM)               (None, 43)                17716     
_________________________________________________________________
dense_7 (Dense)              (None, 3)                 132       
=================================================================
Total params: 213,256
Trainable params: 213,256
Non-trainable params: 0
_________________________________________________________________
subject 1, avg accuracy 0.47567567785043974 over 5 splits
subject 2, avg accuracy 0.44964438218141184 over 5 splits
subject 3, avg accuracy 0.5103840694785288 over 5 splits
subject 4, avg accuracy 0.3405405415876491 over 5 splits
subject 5, avg accuracy 0.5768136580629675 over 5 splits
subject 6, avg accuracy 0.44594594667086723 over 5 splits
subject 7, avg accuracy 0.5431009966779399 over 5 splits
subject 8, avg accuracy 0.46842105357270497 over 5 splits
subject 9, avg accuracy 0.4355618790364367 over 5 splits
subject 11, avg accuracy 0.4441441443857846 over 5 splits
subject 12, avg accuracy 0.3947368424189718 over 5 splits
subject 13, avg accuracy 0.3722617364455422 over 5 splits
subject 14, avg accuracy 0.4087719309104759 over 5 splits
subject 15, avg accuracy 0.6078078084521824 over 5 splits
subject 16, avg accuracy 0.416329287839161 over 5 splits
subject 17, avg accuracy 0.6315789483095471 over 5 splits
subject 18, avg accuracy 0.5189189207714956 over 5 splits
subject 19, avg accuracy 0.40885885901995245 over 5 splits
avg accuracy over all subjects 0.4694164824262255
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
lstm_15 (LSTM)               (None, 31, 13)            40664     
_________________________________________________________________
dropout_8 (Dropout)          (None, 31, 13)            0         
_________________________________________________________________
lstm_16 (LSTM)               (None, 42)                9408      
_________________________________________________________________
dense_8 (Dense)              (None, 3)                 129       
=================================================================
Total params: 50,201
Trainable params: 50,201
Non-trainable params: 0
_________________________________________________________________
subject 1, avg accuracy 0.4540540556649903 over 5 splits
subject 2, avg accuracy 0.4440967288668431 over 5 splits
subject 3, avg accuracy 0.5211948807005522 over 5 splits
subject 4, avg accuracy 0.40000000144984266 over 5 splits
subject 5, avg accuracy 0.4876244672077309 over 5 splits
subject 6, avg accuracy 0.46786786859278917 over 5 splits
subject 7, avg accuracy 0.5216216221049026 over 5 splits
subject 8, avg accuracy 0.45789473684210524 over 5 splits
subject 9, avg accuracy 0.42432432593526065 over 5 splits
subject 11, avg accuracy 0.37402402410457086 over 5 splits
subject 12, avg accuracy 0.4210526325200733 over 5 splits
subject 13, avg accuracy 0.37724039908154083 over 5 splits
subject 14, avg accuracy 0.4236167356995275 over 5 splits
subject 15, avg accuracy 0.5141141147584887 over 5 splits
subject 16, avg accuracy 0.43238866543560694 over 5 splits
subject 17, avg accuracy 0.6526315783199511 over 5 splits
subject 18, avg accuracy 0.5675675686952231 over 5 splits
subject 19, avg accuracy 0.44744744809182196 over 5 splits
avg accuracy over all subjects 0.46604232522621225
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
lstm_17 (LSTM)               (None, 31, 58)            191864    
_________________________________________________________________
dropout_9 (Dropout)          (None, 31, 58)            0         
_________________________________________________________________
lstm_18 (LSTM)               (None, 30)                10680     
_________________________________________________________________
dense_9 (Dense)              (None, 3)                 93        
=================================================================
Total params: 202,637
Trainable params: 202,637
Non-trainable params: 0
_________________________________________________________________
subject 1, avg accuracy 0.4756756770449716 over 5 splits
subject 2, avg accuracy 0.43399715633429636 over 5 splits
subject 3, avg accuracy 0.5753911813962171 over 5 splits
subject 4, avg accuracy 0.3621621636120048 over 5 splits
subject 5, avg accuracy 0.5133712680716264 over 5 splits
subject 6, avg accuracy 0.483783785475267 over 5 splits
subject 7, avg accuracy 0.4728307271283517 over 5 splits
subject 8, avg accuracy 0.431578948309547 over 5 splits
subject 9, avg accuracy 0.45149360015076906 over 5 splits
subject 11, avg accuracy 0.4394894896505831 over 5 splits
subject 12, avg accuracy 0.363157896148531 over 5 splits
subject 13, avg accuracy 0.4096728324847744 over 5 splits
subject 14, avg accuracy 0.502159246456446 over 5 splits
subject 15, avg accuracy 0.5363363369807109 over 5 splits
subject 16, avg accuracy 0.4477732798147459 over 5 splits
subject 17, avg accuracy 0.5999999987451654 over 5 splits
subject 18, avg accuracy 0.513513516413199 over 5 splits
subject 19, avg accuracy 0.44234234242288917 over 5 splits
avg accuracy over all subjects 0.46970719148000545
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
lstm_19 (LSTM)               (None, 31, 66)            220440    
_________________________________________________________________
dropout_10 (Dropout)         (None, 31, 66)            0         
_________________________________________________________________
lstm_20 (LSTM)               (None, 15)                4920      
_________________________________________________________________
dense_10 (Dense)             (None, 3)                 48        
=================================================================
Total params: 225,408
Trainable params: 225,408
Non-trainable params: 0
_________________________________________________________________
subject 1, avg accuracy 0.5081081098801381 over 5 splits
subject 2, avg accuracy 0.41763869307797463 over 5 splits
subject 3, avg accuracy 0.5431009970043665 over 5 splits
subject 4, avg accuracy 0.4378378396098679 over 5 splits
subject 5, avg accuracy 0.4652916091604219 over 5 splits
subject 6, avg accuracy 0.45660660886191745 over 5 splits
subject 7, avg accuracy 0.5113798021422341 over 5 splits
subject 8, avg accuracy 0.4473684216800489 over 5 splits
subject 9, avg accuracy 0.4571835012134075 over 5 splits
subject 11, avg accuracy 0.42867867948414684 over 5 splits
subject 12, avg accuracy 0.41578947446848213 over 5 splits
subject 13, avg accuracy 0.3833570431594659 over 5 splits
subject 14, avg accuracy 0.47651821971744013 over 5 splits
subject 15, avg accuracy 0.5033033039476779 over 5 splits
subject 16, avg accuracy 0.411605939558643 over 5 splits
subject 17, avg accuracy 0.621052631892656 over 5 splits
subject 18, avg accuracy 0.5459459476374292 over 5 splits
subject 19, avg accuracy 0.4141141144363014 over 5 splits
avg accuracy over all subjects 0.4691600520518122
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
lstm_21 (LSTM)               (None, 31, 13)            40664     
_________________________________________________________________
dropout_11 (Dropout)         (None, 31, 13)            0         
_________________________________________________________________
lstm_22 (LSTM)               (None, 40)                8640      
_________________________________________________________________
dense_11 (Dense)             (None, 3)                 123       
=================================================================
Total params: 49,427
Trainable params: 49,427
Non-trainable params: 0
_________________________________________________________________
subject 1, avg accuracy 0.4972972981027654 over 5 splits
subject 2, avg accuracy 0.40654338518552385 over 5 splits
subject 3, avg accuracy 0.473115222014031 over 5 splits
subject 4, avg accuracy 0.3729729737784412 over 5 splits
subject 5, avg accuracy 0.46514936068319157 over 5 splits
subject 6, avg accuracy 0.4786786801285213 over 5 splits
subject 7, avg accuracy 0.5429587499685001 over 5 splits
subject 8, avg accuracy 0.4526315795747857 over 5 splits
subject 9, avg accuracy 0.4465149379132652 over 5 splits
subject 11, avg accuracy 0.43393393417557447 over 5 splits
subject 12, avg accuracy 0.44210526456958366 over 5 splits
subject 13, avg accuracy 0.3234708400488239 over 5 splits
subject 14, avg accuracy 0.43441295733577323 over 5 splits
subject 15, avg accuracy 0.44759759824197215 over 5 splits
subject 16, avg accuracy 0.406477733489312 over 5 splits
subject 17, avg accuracy 0.6 over 5 splits
subject 18, avg accuracy 0.4864864884196101 over 5 splits
subject 19, avg accuracy 0.3755255261699001 over 5 splits
avg accuracy over all subjects 0.44921514054442085
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
lstm_23 (LSTM)               (None, 31, 30)            95880     
_________________________________________________________________
dropout_12 (Dropout)         (None, 31, 30)            0         
_________________________________________________________________
lstm_24 (LSTM)               (None, 43)                12728     
_________________________________________________________________
dense_12 (Dense)             (None, 3)                 132       
=================================================================
Total params: 108,740
Trainable params: 108,740
Non-trainable params: 0
_________________________________________________________________
subject 1, avg accuracy 0.54594594812071 over 5 splits
subject 2, avg accuracy 0.40184921835513404 over 5 splits
subject 3, avg accuracy 0.4941678542203958 over 5 splits
subject 4, avg accuracy 0.37297297369789434 over 5 splits
subject 5, avg accuracy 0.5618776688238295 over 5 splits
subject 6, avg accuracy 0.5058558573056986 over 5 splits
subject 7, avg accuracy 0.5160739690234956 over 5 splits
subject 8, avg accuracy 0.4210526328337821 over 5 splits
subject 9, avg accuracy 0.4837837858610438 over 5 splits
subject 11, avg accuracy 0.44444444524991267 over 5 splits
subject 12, avg accuracy 0.41052631610318235 over 5 splits
subject 13, avg accuracy 0.3614509252447152 over 5 splits
subject 14, avg accuracy 0.4506072883744311 over 5 splits
subject 15, avg accuracy 0.5472972976194845 over 5 splits
subject 16, avg accuracy 0.4326585698063396 over 5 splits
subject 17, avg accuracy 0.5842105247472462 over 5 splits
subject 18, avg accuracy 0.5405405422320237 over 5 splits
subject 19, avg accuracy 0.4475975982419721 over 5 splits
avg accuracy over all subjects 0.4734951897700717
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
lstm_25 (LSTM)               (None, 31, 76)            256880    
_________________________________________________________________
dropout_13 (Dropout)         (None, 31, 76)            0         
_________________________________________________________________
lstm_26 (LSTM)               (None, 35)                15680     
_________________________________________________________________
dense_13 (Dense)             (None, 3)                 108       
=================================================================
Total params: 272,668
Trainable params: 272,668
Non-trainable params: 0
_________________________________________________________________
subject 1, avg accuracy 0.4702702718006598 over 5 splits
subject 2, avg accuracy 0.39146514991523534 over 5 splits
subject 3, avg accuracy 0.5321479393357402 over 5 splits
subject 4, avg accuracy 0.372972974261722 over 5 splits
subject 5, avg accuracy 0.5182076824762742 over 5 splits
subject 6, avg accuracy 0.42372372477083237 over 5 splits
subject 7, avg accuracy 0.4890469429418339 over 5 splits
subject 8, avg accuracy 0.4789473692053242 over 5 splits
subject 9, avg accuracy 0.39815078412486005 over 5 splits
subject 11, avg accuracy 0.43453453469562814 over 5 splits
subject 12, avg accuracy 0.42105263283378197 over 5 splits
subject 13, avg accuracy 0.3507823632121256 over 5 splits
subject 14, avg accuracy 0.502429151197194 over 5 splits
subject 15, avg accuracy 0.491741742063929 over 5 splits
subject 16, avg accuracy 0.3585695023639643 over 5 splits
subject 17, avg accuracy 0.6315789464272951 over 5 splits
subject 18, avg accuracy 0.45945946171477037 over 5 splits
subject 19, avg accuracy 0.3429429430234898 over 5 splits
avg accuracy over all subjects 0.448223562020259
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
lstm_27 (LSTM)               (None, 31, 30)            95880     
_________________________________________________________________
dropout_14 (Dropout)         (None, 31, 30)            0         
_________________________________________________________________
lstm_28 (LSTM)               (None, 16)                3008      
_________________________________________________________________
dense_14 (Dense)             (None, 3)                 51        
=================================================================
Total params: 98,939
Trainable params: 98,939
Non-trainable params: 0
_________________________________________________________________
subject 1, avg accuracy 0.4486486492124763 over 5 splits
subject 2, avg accuracy 0.3702702712283535 over 5 splits
subject 3, avg accuracy 0.5544807980274239 over 5 splits
subject 4, avg accuracy 0.4324324336406347 over 5 splits
subject 5, avg accuracy 0.4816500720903171 over 5 splits
subject 6, avg accuracy 0.48948949126151947 over 5 splits
subject 7, avg accuracy 0.5046941678690198 over 5 splits
subject 8, avg accuracy 0.47894737014645017 over 5 splits
subject 9, avg accuracy 0.39260313002601965 over 5 splits
subject 11, avg accuracy 0.4665165166776101 over 5 splits
subject 12, avg accuracy 0.3315789475252754 over 5 splits
subject 13, avg accuracy 0.3620199156095768 over 5 splits
subject 14, avg accuracy 0.45006747590063717 over 5 splits
subject 15, avg accuracy 0.5141141144363013 over 5 splits
subject 16, avg accuracy 0.4063427817242348 over 5 splits
subject 17, avg accuracy 0.6052631588358628 over 5 splits
subject 18, avg accuracy 0.45945946107039576 over 5 splits
subject 19, avg accuracy 0.4202702703508171 over 5 splits
avg accuracy over all subjects 0.4538249458684959
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
lstm_29 (LSTM)               (None, 31, 37)            119288    
_________________________________________________________________
dropout_15 (Dropout)         (None, 31, 37)            0         
_________________________________________________________________
lstm_30 (LSTM)               (None, 22)                5280      
_________________________________________________________________
dense_15 (Dense)             (None, 3)                 69        
=================================================================
Total params: 124,637
Trainable params: 124,637
Non-trainable params: 0
_________________________________________________________________
subject 1, avg accuracy 0.5459459473152418 over 5 splits
subject 2, avg accuracy 0.3698435293449616 over 5 splits
subject 3, avg accuracy 0.4786628749936946 over 5 splits
subject 4, avg accuracy 0.40000000104710864 over 5 splits
subject 5, avg accuracy 0.4971550506684044 over 5 splits
subject 6, avg accuracy 0.4948948953781758 over 5 splits
subject 7, avg accuracy 0.5046941686448128 over 5 splits
subject 8, avg accuracy 0.4631578955211137 over 5 splits
subject 9, avg accuracy 0.4462304425612622 over 5 splits
subject 11, avg accuracy 0.4454954955760423 over 5 splits
subject 12, avg accuracy 0.389473685465361 over 5 splits
subject 13, avg accuracy 0.373115221763912 over 5 splits
subject 14, avg accuracy 0.4290148458982769 over 5 splits
subject 15, avg accuracy 0.5139639642861512 over 5 splits
subject 16, avg accuracy 0.46423751794294466 over 5 splits
subject 17, avg accuracy 0.6526315798884944 over 5 splits
subject 18, avg accuracy 0.5729729749060966 over 5 splits
subject 19, avg accuracy 0.35870870878925554 over 5 splits
avg accuracy over all subjects 0.46667771111062833
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
lstm_31 (LSTM)               (None, 31, 34)            109208    
_________________________________________________________________
dropout_16 (Dropout)         (None, 31, 34)            0         
_________________________________________________________________
lstm_32 (LSTM)               (None, 11)                2024      
_________________________________________________________________
dense_16 (Dense)             (None, 3)                 36        
=================================================================
Total params: 111,268
Trainable params: 111,268
Non-trainable params: 0
_________________________________________________________________
subject 1, avg accuracy 0.5621621636925518 over 5 splits
subject 2, avg accuracy 0.3860597455526992 over 5 splits
subject 3, avg accuracy 0.5058321488191868 over 5 splits
subject 4, avg accuracy 0.34054054174874276 over 5 splits
subject 5, avg accuracy 0.4766714098443348 over 5 splits
subject 6, avg accuracy 0.4890390400056009 over 5 splits
subject 7, avg accuracy 0.5958748237761122 over 5 splits
subject 8, avg accuracy 0.5157894741547736 over 5 splits
subject 9, avg accuracy 0.4301564738726718 over 5 splits
subject 11, avg accuracy 0.3959459461875864 over 5 splits
subject 12, avg accuracy 0.35263158004534867 over 5 splits
subject 13, avg accuracy 0.3348506409828558 over 5 splits
subject 14, avg accuracy 0.4396761153954083 over 5 splits
subject 15, avg accuracy 0.46426426490863876 over 5 splits
subject 16, avg accuracy 0.42658569554568304 over 5 splits
subject 17, avg accuracy 0.6052631600906974 over 5 splits
subject 18, avg accuracy 0.5513513532844749 over 5 splits
subject 19, avg accuracy 0.4426426429648299 over 5 splits
avg accuracy over all subjects 0.46196317893734423
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
lstm_33 (LSTM)               (None, 31, 11)            34320     
_________________________________________________________________
dropout_17 (Dropout)         (None, 31, 11)            0         
_________________________________________________________________
lstm_34 (LSTM)               (None, 25)                3700      
_________________________________________________________________
dense_17 (Dense)             (None, 3)                 78        
=================================================================
Total params: 38,098
Trainable params: 38,098
Non-trainable params: 0
_________________________________________________________________
subject 1, avg accuracy 0.4162162173438717 over 5 splits
subject 2, avg accuracy 0.4173541975775959 over 5 splits
subject 3, avg accuracy 0.44039829464080826 over 5 splits
subject 4, avg accuracy 0.3891891903973915 over 5 splits
subject 5, avg accuracy 0.47596017142193414 over 5 splits
subject 6, avg accuracy 0.48888888969435706 over 5 splits
subject 7, avg accuracy 0.4995732596978694 over 5 splits
subject 8, avg accuracy 0.4052631585221541 over 5 splits
subject 9, avg accuracy 0.44637268975822214 over 5 splits
subject 11, avg accuracy 0.41771771795935814 over 5 splits
subject 12, avg accuracy 0.41578947540960814 over 5 splits
subject 13, avg accuracy 0.3933143673970723 over 5 splits
subject 14, avg accuracy 0.5176788120979239 over 5 splits
subject 15, avg accuracy 0.5141141147584887 over 5 splits
subject 16, avg accuracy 0.42172739679514154 over 5 splits
subject 17, avg accuracy 0.5947368411641373 over 5 splits
subject 18, avg accuracy 0.49729729914987414 over 5 splits
subject 19, avg accuracy 0.3647147153590893 over 5 splits
avg accuracy over all subjects 0.4509059338413832
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
lstm_35 (LSTM)               (None, 31, 56)            184800    
_________________________________________________________________
dropout_18 (Dropout)         (None, 31, 56)            0         
_________________________________________________________________
lstm_36 (LSTM)               (None, 48)                20160     
_________________________________________________________________
dense_18 (Dense)             (None, 3)                 147       
=================================================================
Total params: 205,107
Trainable params: 205,107
Non-trainable params: 0
_________________________________________________________________
subject 1, avg accuracy 0.5567567582871462 over 5 splits
subject 2, avg accuracy 0.45021337318216925 over 5 splits
subject 3, avg accuracy 0.5813655786714377 over 5 splits
subject 4, avg accuracy 0.40000000161093635 over 5 splits
subject 5, avg accuracy 0.6044096753827878 over 5 splits
subject 6, avg accuracy 0.5433933946821424 over 5 splits
subject 7, avg accuracy 0.5320056913460303 over 5 splits
subject 8, avg accuracy 0.44210526441272935 over 5 splits
subject 9, avg accuracy 0.42958748389358714 over 5 splits
subject 11, avg accuracy 0.45600600608655284 over 5 splits
subject 12, avg accuracy 0.4473684230917378 over 5 splits
subject 13, avg accuracy 0.4152204850744218 over 5 splits
subject 14, avg accuracy 0.4396761138308869 over 5 splits
subject 15, avg accuracy 0.5246246249468118 over 5 splits
subject 16, avg accuracy 0.5102564122552975 over 5 splits
subject 17, avg accuracy 0.6210526315789473 over 5 splits
subject 18, avg accuracy 0.49729729850549953 over 5 splits
subject 19, avg accuracy 0.43138138146192817 over 5 splits
avg accuracy over all subjects 0.4934844776833917
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
lstm_37 (LSTM)               (None, 31, 77)            260568    
_________________________________________________________________
dropout_19 (Dropout)         (None, 31, 77)            0         
_________________________________________________________________
lstm_38 (LSTM)               (None, 47)                23500     
_________________________________________________________________
dense_19 (Dense)             (None, 3)                 144       
=================================================================
Total params: 284,212
Trainable params: 284,212
Non-trainable params: 0
_________________________________________________________________
subject 1, avg accuracy 0.5243243264990884 over 5 splits
subject 2, avg accuracy 0.439260314695357 over 5 splits
subject 3, avg accuracy 0.5051209112870405 over 5 splits
subject 4, avg accuracy 0.4216216232325579 over 5 splits
subject 5, avg accuracy 0.4495021344333421 over 5 splits
subject 6, avg accuracy 0.44609609786812604 over 5 splits
subject 7, avg accuracy 0.446657184762602 over 5 splits
subject 8, avg accuracy 0.44210526362845765 over 5 splits
subject 9, avg accuracy 0.30113798088233806 over 5 splits
subject 11, avg accuracy 0.41846846854901526 over 5 splits
subject 12, avg accuracy 0.33684210510630364 over 5 splits
subject 13, avg accuracy 0.32546230568570395 over 5 splits
subject 14, avg accuracy 0.4338731453365642 over 5 splits
subject 15, avg accuracy 0.4749249252471122 over 5 splits
subject 16, avg accuracy 0.41700405013545155 over 5 splits
subject 17, avg accuracy 0.6105263161031823 over 5 splits
subject 18, avg accuracy 0.5081081096384976 over 5 splits
subject 19, avg accuracy 0.38663663679773025 over 5 splits
avg accuracy over all subjects 0.4382039944382484
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
lstm_39 (LSTM)               (None, 31, 13)            40664     
_________________________________________________________________
dropout_20 (Dropout)         (None, 31, 13)            0         
_________________________________________________________________
lstm_40 (LSTM)               (None, 31)                5580      
_________________________________________________________________
dense_20 (Dense)             (None, 3)                 96        
=================================================================
Total params: 46,340
Trainable params: 46,340
Non-trainable params: 0
_________________________________________________________________
subject 1, avg accuracy 0.4648648655897863 over 5 splits
subject 2, avg accuracy 0.4384068286011941 over 5 splits
subject 3, avg accuracy 0.5436699869749726 over 5 splits
subject 4, avg accuracy 0.38918918975301686 over 5 splits
subject 5, avg accuracy 0.5025604563196896 over 5 splits
subject 6, avg accuracy 0.4453453466340944 over 5 splits
subject 7, avg accuracy 0.4893314390738692 over 5 splits
subject 8, avg accuracy 0.4526315803590574 over 5 splits
subject 9, avg accuracy 0.37667141025554746 over 5 splits
subject 11, avg accuracy 0.4782282284698686 over 5 splits
subject 12, avg accuracy 0.4052631582084455 over 5 splits
subject 13, avg accuracy 0.32475106908620505 over 5 splits
subject 14, avg accuracy 0.4291497995978908 over 5 splits
subject 15, avg accuracy 0.5082582589026328 over 5 splits
subject 16, avg accuracy 0.41228070468635536 over 5 splits
subject 17, avg accuracy 0.6210526309515301 over 5 splits
subject 18, avg accuracy 0.4702702723644876 over 5 splits
subject 19, avg accuracy 0.43123123187560586 over 5 splits
avg accuracy over all subjects 0.45461980320579165
end time
Sun Feb 18 00:49:33 CET 2018
slurmstepd: error: Exceeded step memory limit at some point.
